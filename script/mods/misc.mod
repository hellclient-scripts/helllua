convpathlist=function(start,_path)
--把以;分隔的列表转换为机器可用的格式.第一个参数是开始位置,第二个是列表
	output="={"
	re=rex.new("([^;]+)")
	n=re:gmatch(_path,function (m, t)
		output=output..('({loc='..tostring(start)..',step="'..m..'"}),')
		start=getexitroom(start,m)
	end)
	output=output.."}"
SendToNotepad("pathlist",output)
end

gopath=function(path)
	do_steppath(path,steppath["next"])
end

newmod=function(modname)
	output=modname.."={}\r\n"
	output=output..modname..'["ok"]=nil\r\n'
	output=output..modname..'["fail"]=nil\r\n\r\n'
	output=output.."do_"..modname.."=function("..modname.."_ok,"..modname.."_fail)\r\n"
	output=output.."	"..modname..'["ok"]='..modname.."_ok\r\n"
	output=output.."	"..modname..'["fail"]='..modname.."_fail\r\n"
	output=output.."end\r\n\r\n"
	output=output..modname..'["end"]=function(s)\r\n'
	output=output..'	if ((s~="")and(s~=nil)) then\r\n'
	output=output.."		call("..modname.."[s])\r\n"
	output=output.."	end\r\n"
	output=output.."	"..modname..'["ok"]=nil\r\n'
	output=output.."	"..modname..'["fail"]=nil\r\n'
	output=output.."end\r\n\r\n"
	output=output..modname.."_end_ok=function()\r\n"
	output=output.."	"..modname..'["end"]("ok")\r\n'
	output=output.."end\r\n\r\n"
	output=output..modname.."_end_fail=function()\r\n"
	output=output.."	"..modname..'["end"]("fail")\r\n'
	output=output.."end\r\n\r\n"
	SendToNotepad(modname,output)
end


cnxing={}
cnxing["白"]="bai"
cnxing["蔡"]="cai"
cnxing["曹"]="cao"
cnxing["陈"]="chen"
cnxing["戴"]="dai"
cnxing["窦"]="dou"
cnxing["邓"]="deng"
cnxing["狄"]="di"
cnxing["杜"]="du"
cnxing["段"]="duan"
cnxing["范"]="fan"
cnxing["樊"]="fan"
cnxing["房"]="fang"
cnxing["风"]="feng"
cnxing["符"]="fu"
cnxing["福"]="fu"
cnxing["高"]="gao"
cnxing["古"]="gu"
cnxing["关"]="guan"
cnxing["郭"]="guo"
cnxing["毛"]="mao"
cnxing["韩"]="han"
cnxing["胡"]="hu"
cnxing["花"]="hua"
cnxing["洪"]="hong"
cnxing["侯"]="hou"
cnxing["黄"]="huang"
cnxing["贾"]="jia"
cnxing["蒋"]="jiang"
cnxing["金"]="jin"
cnxing["廖"]="liao"
cnxing["梁"]="liang"
cnxing["李"]="li"
cnxing["林"]="lin"
cnxing["刘"]="liu"
cnxing["龙"]="long"
cnxing["陆"]="lu"
cnxing["卢"]="lu"
cnxing["罗"]="luo"
cnxing["马"]="ma"
cnxing["牛"]="niu"
cnxing["庞"]="pang"
cnxing["裴"]="pei"
cnxing["彭"]="peng"
cnxing["戚"]="qi"
cnxing["齐"]="qi"
cnxing["钱"]="qian"
cnxing["乔"]="qiao"
cnxing["秦"]="qin"
cnxing["邱"]="qiu"
cnxing["裘"]="qiu"
cnxing["仇"]="qiu"
cnxing["沙"]="sha"
cnxing["商"]="shang"
cnxing["尚"]="shang"
cnxing["邵"]="shao"
cnxing["沈"]="shen"
cnxing["师"]="shi"
cnxing["施"]="shi"
cnxing["宋"]="song"
cnxing["孙"]="sun"
cnxing["童"]="tong"
cnxing["万"]="wan"
cnxing["王"]="wang"
cnxing["魏"]="wei"
cnxing["卫"]="wei"
cnxing["吴"]="wu"
cnxing["武"]="wu"
cnxing["萧"]="xiao"
cnxing["肖"]="xiao"
cnxing["项"]="xiang"
cnxing["许"]="xu"
cnxing["徐"]="xu"
cnxing["薛"]="xue"
cnxing["杨"]="yang"
cnxing["羊"]="yang"
cnxing["阳"]="yang"
cnxing["易"]="yi"
cnxing["尹"]="yin"
cnxing["俞"]="yu"
cnxing["赵"]="zhao"
cnxing["钟"]="zhong"
cnxing["周"]="zhou"
cnxing["郑"]="zheng"
cnxing["朱"]="zhu"

cnxing["东方"]="dongfang"
cnxing["独孤"]="dugu"
cnxing["慕容"]="murong"
cnxing["欧阳"]="ouyang"
cnxing["司马"]="sima"
cnxing["西门"]="ximen"
cnxing["尉迟"]="yuchi"
cnxing["长孙"]="zhangsun"
cnxing["诸葛"]="zhuge"
cnxing["上官"]="shangguan"
cnxing["夏候"]="xiahou"
cnxing["夏侯"]="xiahou"
cnxing["闻人"]="wenren"
cnxing["皇甫"]="huangfu"
cnxing["澹台"]="tantai"
cnxing["公治"]="gongzhi"
cnxing["淳于"]="chunyu"
cnxing["申屠"]="shentu"
cnxing["公孙"]="gongsun"
cnxing["公羊"]="gongyang"
cnxing["轩辕"]="xuanyuan"
cnxing["令狐"]="linghu"
cnxing["钟离"]="zhongli"
cnxing["宇文"]="yuwen"
cnxing["幕容"]="murong"
cnxing["仲孙"]="zhongsun"
cnxing["司徒"]="situ"
cnxing["司空"]="sikong"
cnxing["端木"]="duanmu"
cnxing["公良"]="gongliang"
cnxing["百里"]="baili"
cnxing["东郭"]="dongguo"
cnxing["南郭"]="nanguo"
cnxing["呼延"]="huyan"
cnxing["羊舌"]="yangshe"
cnxing["东门"]="dongmen"
cnxing["南宫"]="nangong"

cnname={}
cnname["东"]="dong"
cnname["侗"]="dong"
cnname["奥"]="ao"
cnname["傲"]="ao"
cnname["敖"]="ao"
cnname["骜"]="ao"
cnname["翱"]="ao"
cnname["片"]="pian"
cnname["翩"]="pian"
cnname["渐"]="jian"
cnname["剑"]="jian"
cnname["见"]="jian"
cnname["建"]="jian"
cnname["间"]="jian"
cnname["柬"]="jian"
cnname["坚"]="jian"
cnname["俭"]="jian"
cnname["堂"]="tang"
cnname["唐"]="tang"
cnname["棠"]="tang"
cnname["瑭"]="tang"
cnname["映"]="ying"
cnname["英"]="ying"
cnname["影"]="ying"
cnname["颖"]="ying"
cnname["瑛"]="ying"
cnname["应"]="ying"
cnname["莹"]="ying"
cnname["郢"]="ying"
cnname["鹰"]="ying"
cnname["熊"]="xiong"
cnname["雄"]="xiong"
cnname["边"]="bian"
cnname["卞"]="bian"
cnname["弁"]="bian"
cnname["忭"]="bian"
cnname["清"]="qing"
cnname["庆"]="qing"
cnname["卿"]="qing"
cnname["晴"]="qing"
cnname["统"]="tong"
cnname["通"]="tong"
cnname["同"]="tong"
cnname["童"]="tong"
cnname["彤"]="tong"
cnname["仝"]="tong"
cnname["风"]="feng"
cnname["凤"]="feng"
cnname["封"]="feng"
cnname["丰"]="feng"
cnname["奉"]="feng"
cnname["枫"]="feng"
cnname["峰"]="feng"
cnname["锋"]="feng"
cnname["方"]="fang"
cnname["访"]="fang"
cnname["邡"]="fang"
cnname["昉"]="fang"
cnname["苍"]="cang"
cnname["仓"]="cang"
cnname["朗"]="lang"
cnname["浪"]="lang"
cnname["廊"]="lang"
cnname["琅"]="lang"
cnname["阆"]="lang"
cnname["莨"]="lang"
cnname["安"]="an"
cnname["黯"]="an"
cnname["谙"]="an"
cnname["都"]="dou"
cnname["沙"]="sha"
cnname["煞"]="sha"
cnname["隐"]="yin"
cnname["因"]="yin"
cnname["引"]="yin"
cnname["银"]="yin"
cnname["音"]="yin"
cnname["寅"]="yin"
cnname["吟"]="yin"
cnname["胤"]="yin"
cnname["訚"]="yin"
cnname["烟"]="yin"
cnname["荫"]="yin"
cnname["师"]="shi"
cnname["史"]="shi"
cnname["石"]="shi"
cnname["时"]="shi"
cnname["十"]="shi"
cnname["世"]="shi"
cnname["士"]="shi"
cnname["诗"]="shi"
cnname["始"]="shi"
cnname["示"]="shi"
cnname["适"]="shi"
cnname["炻"]="shi"
cnname["邦"]="bang"
cnname["冉"]="ran"
cnname["然"]="ran"
cnname["染"]="ran"
cnname["燃"]="ran"
cnname["万"]="wan"
cnname["宛"]="wan"
cnname["晚"]="wan"
cnname["制"]="zhi"
cnname["至"]="zhi"
cnname["值"]="zhi"
cnname["知"]="zhi"
cnname["质"]="zhi"
cnname["致"]="zhi"
cnname["智"]="zhi"
cnname["志"]="zhi"
cnname["直"]="zhi"
cnname["治"]="zhi"
cnname["执"]="zhi"
cnname["止"]="zhi"
cnname["置"]="zhi"
cnname["芝"]="zhi"
cnname["旨"]="zhi"
cnname["峙"]="zhi"
cnname["芷"]="zhi"
cnname["挚"]="zhi"
cnname["郅"]="zhi"
cnname["炙"]="zhi"
cnname["雉"]="zhi"
cnname["帜"]="zhi"
cnname["子"]="zi"
cnname["资"]="zi"
cnname["兹"]="zi"
cnname["紫"]="zi"
cnname["姿"]="zi"
cnname["孜"]="zi"
cnname["梓"]="zi"
cnname["秭"]="zi"
cnname["刊"]="kan"
cnname["戡"]="kan"
cnname["渔"]="yu"
cnname["郁"]="yu"
cnname["寓"]="yu"
cnname["于"]="yu"
cnname["余"]="yu"
cnname["玉"]="yu"
cnname["雨"]="yu"
cnname["语"]="yu"
cnname["预"]="yu"
cnname["羽"]="yu"
cnname["舆"]="yu"
cnname["育"]="yu"
cnname["宇"]="yu"
cnname["禹"]="yu"
cnname["域"]="yu"
cnname["誉"]="yu"
cnname["瑜"]="yu"
cnname["屿"]="yu"
cnname["御"]="yu"
cnname["渝"]="yu"
cnname["毓"]="yu"
cnname["虞"]="yu"
cnname["禺"]="yu"
cnname["豫"]="yu"
cnname["裕"]="yu"
cnname["钰"]="yu"
cnname["煜"]="yu"
cnname["聿"]="yu"
cnname["吴"]="wu"
cnname["物"]="wu"
cnname["务"]="wu"
cnname["武"]="wu"
cnname["午"]="wu"
cnname["五"]="wu"
cnname["巫"]="wu"
cnname["邬"]="wu"
cnname["兀"]="wu"
cnname["毋"]="wu"
cnname["戊"]="wu"
cnname["楠"]="nan"
cnname["南"]="nan"
cnname["水"]="shui"
cnname["迟"]="chi"
cnname["持"]="chi"
cnname["池"]="chi"
cnname["赤"]="chi"
cnname["尺"]="chi"
cnname["驰"]="chi"
cnname["炽"]="chi"
cnname["斑"]="ban"
cnname["般"]="ban"
cnname["仁"]="ren"
cnname["刃"]="ren"
cnname["壬"]="ren"
cnname["仞"]="ren"
cnname["亲"]="qin"
cnname["琴"]="qin"
cnname["钦"]="qin"
cnname["沁"]="qin"
cnname["芩"]="qin"
cnname["矜"]="qin"
cnname["范"]="fan"
cnname["凡"]="fan"
cnname["反"]="fan"
cnname["泛"]="fan"
cnname["帆"]="fan"
cnname["蕃"]="fan"
cnname["皑"]="ai"
cnname["艾"]="ai"
cnname["哀"]="ai"
cnname["常"]="chang"
cnname["长"]="chang"
cnname["昌"]="chang"
cnname["敞"]="chang"
cnname["玚"]="chang"
cnname["虎"]="hu"
cnname["忽"]="hu"
cnname["湖"]="hu"
cnname["护"]="hu"
cnname["乎"]="hu"
cnname["祜"]="hu"
cnname["浒"]="hu"
cnname["怙"]="hu"
cnname["卫"]="wei"
cnname["微"]="wei"
cnname["伟"]="wei"
cnname["维"]="wei"
cnname["威"]="wei"
cnname["韦"]="wei"
cnname["纬"]="wei"
cnname["炜"]="wei"
cnname["惟"]="wei"
cnname["玮"]="wei"
cnname["为"]="wei"
cnname["夫"]="fu"
cnname["符"]="fu"
cnname["弗"]="fu"
cnname["芙"]="fu"
cnname["高"]="gao"
cnname["皋"]="gao"
cnname["郜"]="gao"
cnname["镐"]="gao"
cnname["此"]="ci"
cnname["次"]="ci"
cnname["词"]="ci"
cnname["茨"]="ci"
cnname["辞"]="ci"
cnname["慈"]="ci"
cnname["罢"]="ba"
cnname["霸"]="ba"
cnname["发"]="fa"
cnname["乏"]="fa"
cnname["珐"]="fa"
cnname["卓"]="zhuo"
cnname["灼"]="zhuo"
cnname["灼"]="zhuo"
cnname["拙"]="zhuo"
cnname["琢"]="zhuo"
cnname["濯"]="zhuo"
cnname["斫"]="zhuo"
cnname["擢"]="zhuo"
cnname["焯"]="zhuo"
cnname["酌"]="zhuo"
cnname["上"]="shang"
cnname["裳"]="shang"
cnname["商"]="shang"
cnname["可"]="ke"
cnname["克"]="ke"
cnname["科"]="ke"
cnname["刻"]="ke"
cnname["珂"]="ke"
cnname["恪"]="ke"
cnname["溘"]="ke"
cnname["牁"]="ke"
cnname["北"]="bei"
cnname["倍"]="bei"
cnname["贝"]="bei"
cnname["备"]="bei"
cnname["淼"]="miao"
cnname["渺"]="miao"
cnname["邈"]="miao"
cnname["作"]="zuo"
cnname["左"]="zuo"
cnname["佐"]="zuo"
cnname["笮"]="zuo"
cnname["凿"]="zuo"
cnname["深"]="shen"
cnname["审"]="shen"
cnname["神"]="shen"
cnname["申"]="shen"
cnname["慎"]="shen"
cnname["参"]="shen"
cnname["莘"]="shen"
cnname["历"]="li"
cnname["离"]="li"
cnname["里"]="li"
cnname["理"]="li"
cnname["利"]="li"
cnname["立"]="li"
cnname["力"]="li"
cnname["丽"]="li"
cnname["礼"]="li"
cnname["黎"]="li"
cnname["栗"]="li"
cnname["荔"]="li"
cnname["沥"]="li"
cnname["栎"]="li"
cnname["璃"]="li"
cnname["积"]="ji"
cnname["极"]="ji"
cnname["济"]="ji"
cnname["技"]="ji"
cnname["击"]="ji"
cnname["疾"]="ji"
cnname["及"]="ji"
cnname["基"]="ji"
cnname["集"]="ji"
cnname["记"]="ji"
cnname["纪"]="ji"
cnname["季"]="ji"
cnname["继"]="ji"
cnname["吉"]="ji"
cnname["计"]="ji"
cnname["冀"]="ji"
cnname["祭"]="ji"
cnname["际"]="ji"
cnname["籍"]="ji"
cnname["绩"]="ji"
cnname["忌"]="ji"
cnname["寂"]="ji"
cnname["霁"]="ji"
cnname["稷"]="ji"
cnname["玑"]="ji"
cnname["芨"]="ji"
cnname["蓟"]="ji"
cnname["戢"]="ji"
cnname["佶"]="ji"
cnname["奇"]="ji"
cnname["诘"]="ji"
cnname["笈"]="ji"
cnname["畿"]="ji"
cnname["犄"]="ji"
cnname["潇"]="xiao"
cnname["萧"]="xiao"
cnname["笑"]="xiao"
cnname["晓"]="xiao"
cnname["肖"]="xiao"
cnname["霄"]="xiao"
cnname["骁"]="xiao"
cnname["校"]="xiao"
cnname["足"]="zu"
cnname["族"]="zu"
cnname["祖"]="zu"
cnname["卒"]="zu"
cnname["宗"]="zong"
cnname["枞"]="zong"
cnname["竹"]="zhu"
cnname["主"]="zhu"
cnname["驻"]="zhu"
cnname["足"]="zhu"
cnname["朱"]="zhu"
cnname["祝"]="zhu"
cnname["诸"]="zhu"
cnname["珠"]="zhu"
cnname["著"]="zhu"
cnname["竺"]="zhu"
cnname["周"]="zhou"
cnname["州"]="zhou"
cnname["舟"]="zhou"
cnname["胄"]="zhou"
cnname["昼"]="zhou"
cnname["繇"]="you"
cnname["幽"]="you"
cnname["悠"]="you"
cnname["右"]="you"
cnname["忧"]="you"
cnname["猷"]="you"
cnname["酉"]="you"
cnname["中"]="zhong"
cnname["忠"]="zhong"
cnname["钟"]="zhong"
cnname["衷"]="zhong"
cnname["昂"]="ang"
cnname["盎"]="ang"
cnname["易"]="yi"
cnname["意"]="yi"
cnname["依"]="yi"
cnname["亦"]="yi"
cnname["伊"]="yi"
cnname["夷"]="yi"
cnname["倚"]="yi"
cnname["毅"]="yi"
cnname["义"]="yi"
cnname["宜"]="yi"
cnname["仪"]="yi"
cnname["艺"]="yi"
cnname["译"]="yi"
cnname["翼"]="yi"
cnname["逸"]="yi"
cnname["忆"]="yi"
cnname["怡"]="yi"
cnname["熠"]="yi"
cnname["沂"]="yi"
cnname["颐"]="yi"
cnname["奕"]="yi"
cnname["弈"]="yi"
cnname["懿"]="yi"
cnname["翊"]="yi"
cnname["轶"]="yi"
cnname["屹"]="yi"
cnname["猗"]="yi"
cnname["翌"]="yi"
cnname["羊"]="yang"
cnname["洋"]="yang"
cnname["阳"]="yang"
cnname["漾"]="yang"
cnname["央"]="yang"
cnname["秧"]="yang"
cnname["炀"]="yang"
cnname["飏"]="yang"
cnname["鸯"]="yang"
cnname["曹"]="cao"
cnname["草"]="cao"
cnname["操"]="cao"
cnname["漕"]="cao"
cnname["独"]="du"
--cnname["都"]="du"
cnname["西"]="xi"
cnname["席"]="xi"
cnname["锡"]="xi"
cnname["洗"]="xi"
cnname["夕"]="xi"
cnname["兮"]="xi"
cnname["熹"]="xi"
cnname["惜"]="xi"
cnname["洪"]="hong"
cnname["红"]="hong"
cnname["宏"]="hong"
cnname["鸿"]="hong"
cnname["虹"]="hong"
cnname["泓"]="hong"
cnname["弘"]="hong"
cnname["白"]="bai"
cnname["佰"]="bai"
cnname["强"]="qiang"
cnname["羌"]="qiang"
cnname["锖"]="qiang"
cnname["玱"]="qiang"
cnname["马"]="ma"
cnname["化"]="hua"
cnname["花"]="hua"
cnname["华"]="hua"
cnname["骅"]="hua"
cnname["桦"]="hua"
cnname["步"]="bu"
cnname["不"]="bu"
cnname["松"]="song"
cnname["颂"]="song"
cnname["诵"]="song"
cnname["思"]="si"
cnname["斯"]="si"
cnname["丝"]="si"
cnname["司"]="si"
cnname["祀"]="si"
cnname["嗣"]="si"
cnname["巳"]="si"
cnname["表"]="biao"
cnname["标"]="biao"
cnname["彪"]="biao"
cnname["飚"]="biao"
cnname["飙"]="biao"
cnname["贸"]="mao"
cnname["冒"]="mao"
cnname["貌"]="mao"
cnname["冒"]="mao"
cnname["懋"]="mao"
cnname["矛"]="mao"
cnname["卯"]="mao"
cnname["瑁"]="mao"
cnname["号"]="hao"
cnname["浩"]="hao"
cnname["皓"]="hao"
cnname["蒿"]="hao"
cnname["浩"]="hao"
cnname["昊"]="hao"
cnname["灏"]="hao"
cnname["淏"]="hao"
cnname["潜"]="qian"
cnname["谦"]="qian"
cnname["倩"]="qian"
cnname["茜"]="qian"
cnname["乾"]="qian"
cnname["虔"]="qian"
cnname["千"]="qian"
cnname["天"]="tian"
cnname["田"]="tian"
cnname["忝"]="tian"
cnname["临"]="lin"
cnname["霖"]="lin"
cnname["林"]="lin"
cnname["琳"]="lin"

getcnname=function(str)
	if #str%2~=0 then return str end
	local xinglength=2
	local xingstr=""
	xingstr=cnxing[UTF8Sub(str,0,xinglength)]
	if xingstr==nil then
		xinglength=2
		xingstr=cnxing[UTF8Sub(str,0,xinglength)]
		if xingstr==nil then
			return nil
		end
	end
	local minglength=#str-xinglength
	local mingstr=""
	local tname=""
	for i=1,minglength,2 do
		tname=cnname[UTF8Sub(str,i+xinglength-1,i+xinglength+1)]
		if tname==nil then
			return nil
		else
			mingstr=mingstr..tname
		end
	end
	return xingstr.." "..mingstr
end